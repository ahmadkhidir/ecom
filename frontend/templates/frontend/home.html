{% extends "frontend/base.html" %}
{% load static %}
{% load frontend_extras %}

{% block content %}
<main id="content" role="main">
    <!-- Hero -->
    <div class="position-relative">
        <!-- Swiper Main Slider -->
        <div
            class="js-swiper-shop-classic-hero swiper bg-light swiper-initialized swiper-horizontal swiper-pointer-events">

            <div class="swiper-wrapper" id="swiper-wrapper-c02656619c616b45">
                {% for obj in carousel %}
                <!-- Slide -->
                <div class="swiper-slide">
                    <!-- Container -->
                    <div class="container content-space-t-2 content-space-b-3">
                        <div class="row align-items-lg-center">
                            <div class="col-lg-5 order-lg-2 mb-7 mb-lg-0">
                                <div class="mb-6">
                                    <h1 class="display-4 mb-4">{{ obj.name }}</h1>
                                    <p>{{ obj.label }}</p>
                                </div>

                                <div class="d-flex gap-2">    
                                        <a class="btn btn-primary rounded-pill" href="{% url 'frontend:cart' %}" pId="{{ obj.id }}" >${{ obj.get_discount_price }} - Buy!</a>
                                    <a class="btn btn-outline-primary btn-icon rounded-circle" href="#"
                                        data-bs-toggle="tooltip" data-bs-placement="top" title=""
                                        data-bs-original-title="Save for later">
                                        <i class="bi-heart-fill"></i>
                                    </a>
                                </div>
                            </div>
                            <!-- End Col -->

                            <div class="col-lg-6 order-lg-1">
                                <div class="w-75 mx-auto">
                                    <img class="img-fluid" src="{{ obj.get_single_image }}" alt="Image Description">
                                </div>
                            </div>
                            <!-- End Col -->
                        </div>
                        <!-- End Row -->
                    </div>
                    <!-- End Container -->
                </div>
                <!-- End Slide -->
                {% endfor %}

            </div>

            <!-- Swiper Thumbs Slider -->
            <div class="position-absolute bottom-0 start-0 end-0 mb-3">
                <div
                    class="js-swiper-shop-hero-thumbs swiper swiper-initialized swiper-horizontal swiper-pointer-events swiper-thumbs">
                    <div class="swiper-wrapper" id="swiper-wrapper-94cdc8d068319ffc" aria-live="polite"
                        style="flex-flow: row nowrap; justify-content: center;">
                        {% for obj in carousel %}
                        <!-- Slide -->
                        <div class="swiper-slide" role="group"
                            aria-label="{{ forloop.counter }} / {{ products.length }}"
                            style="max-width: fit-content; margin-right: 15px;">
                            <a class="js-swiper-thumb-progress swiper-thumb-progress-avatar" href="javascript:;"
                                tabindex="0">
                                <img class="swiper-thumb-progress-avatar-img" src="{{ obj.get_single_image }}"
                                    alt="Image Description">
                                <span class="swiper-thumb-progress"><svg version="1.1" viewBox="0 0 160 160">
                                        <path class="swiper-thumb-progress-path"
                                            d="M 79.98452083651917 4.000001576345426 A 76 76 0 1 1 79.89443752470656 4.0000733121155605 Z">
                                        </path>
                                    </svg></span></a>
                        </div>
                        <!-- End Slide -->
                        {% endfor %}
                    </div>
                </div>
            </div>

            <!-- Arrows -->
            <div class="js-swiper-shop-classic-hero-button-next swiper-button-next" role="button"
                aria-label="Next slide" aria-controls="swiper-wrapper-c02656619c616b45"></div>
            <div class="js-swiper-shop-classic-hero-button-prev swiper-button-prev" role="button"
                aria-label="Previous slide" aria-controls="swiper-wrapper-c02656619c616b45"></div>
            <!-- End Swiper Main Slider -->
        </div>
        <!-- End Swiper Thumbs Slider -->
    </div>
    <!-- End Hero -->

    <!-- Icon Blocks -->
    {% include "frontend/widgets/intro.html" %}
    <!-- End Icon Blocks -->

    <!-- Card Grid -->
    <div class="container content-space-2 content-space-lg-3" style="margin-bottom: 0!important;">
        <!-- Heading -->
        <div class="w-md-75 w-lg-50 text-center mx-md-auto mb-5 mb-md-9">
            <h2>The better way to shop with Front top-products</h2>
        </div>
        <!-- End Heading -->

        <div class="row mb-2">
            {% for obj in categories %}
            {% if obj.get_single_data %}
            <div class="col-sm-6 col-md-4 mb-4">
                <!-- Card -->
                <div class="card card-bordered shadow-none overflow-hidden">
                    <div class="card-body d-flex align-items-center border-bottom p-0">
                        <div class="w-65">
                            <img class="img-fluid p-2" src="{{ obj.get_single_data.get_multiple_image.0 }}"
                                alt="Image Description">
                        </div>
                        <div class="w-35 border-start">
                            <div class="border-bottom">
                                <img class="img-fluid" src="{{ obj.get_single_data.get_multiple_image.1 }}"
                                    alt="Image Description">
                            </div>
                            <img class="img-fluid" src="{{ obj.get_single_data.get_multiple_image.2 }}"
                                alt="Image Description">
                        </div>
                    </div>

                    <div class="card-footer text-center">
                        <h3 class="card-title">{{ obj.name }}</h3>
                        <p class="card-text text-muted small">Starting from ${{ obj.get_single_data.get_discount_price }}</p>
                        <a class="btn btn-outline-primary btn-sm btn-transition rounded-pill px-6" href="#">View all</a>
                    </div>
                </div>
                <!-- End Card -->
            </div>
            <!-- End Col -->
            {% endif %}
            {% endfor %}

        </div>
        <!-- End Row -->

    </div>
    <!-- End Card Grid -->

    <!-- Card Grid -->
    <div class="container content-space-2 content-space-lg-3">
        <!-- Title -->
        <div class="w-md-75 w-lg-50 text-center mx-md-auto mb-5 mb-md-9">
            <h2>What's trending</h2>
        </div>
        <!-- End Title -->

        <div class="row row-cols-sm-2 row-cols-md-3 row-cols-lg-4 mb-3">
            {% for obj in products %}
            <div class="col mb-4">
                <!-- Card -->
                <div class="card card-bordered shadow-none text-center h-100">
                    <div class="card-pinned">
                        <img class="card-img-top p-5" src="{{ obj.get_single_image }}" alt="Image Description">

                        <div class="card-pinned-top-start">
                            <span class="badge bg-success rounded-pill">New arrival</span>
                        </div>

                        <div class="card-pinned-top-end">
                            <button type="button" class="btn btn-outline-secondary btn-xs btn-icon rounded-circle"
                                data-bs-toggle="tooltip" data-bs-placement="top" title=""
                                data-bs-original-title="Save for later">
                                <i class="bi-heart"></i>
                            </button>
                        </div>
                    </div>

                    <div class="card-body">
                        <div class="mb-1">
                            <a class="link-sm link-secondary" href="#">{{ obj.category.name }}</a>
                        </div>
                        <a class="text-body" href="">{{ obj.name }}</a>
                        <p class="card-text text-dark">${{ obj.get_discount_price }} <span
                                class="text-body ms-1"><del>${{ obj.price }}</del></span></p>
                    </div>

                    <div class="card-footer d-flex flex-column align-items-center pt-0">
                        <!-- Rating -->
                        <a class="d-inline-flex align-items-center mb-3" href="#">
                            <div class="d-inline-flex gap-1 me-2">
                                <img src="{% static 'frontend/images/star-muted.svg' %}" alt="Review rating" width="16">
                                <img src="{% static 'frontend/images/star-muted.svg' %}" alt="Review rating" width="16">
                                <img src="{% static 'frontend/images/star-muted.svg' %}" alt="Review rating" width="16">
                                <img src="{% static 'frontend/images/star-muted.svg' %}" alt="Review rating" width="16">
                                <img src="{% static 'frontend/images/star-muted.svg' %}" alt="Review rating" width="16">
                            </div>
                            <span class="small">0</span>
                        </a>
                        <!-- End Rating -->
                        {% if user.is_authenticated %}
                            {% product_in_user_cart obj.id as in_cart %}
                            {% if in_cart %}
                            <button type="button" class="btn btn-primary btn-sm rounded-pill cart_query" onclick="addToCart(this)" pId="{{ obj.id }}">Added to cart!</button>
                            {% else %}
                            <button type="button" class="btn btn-outline-primary btn-sm rounded-pill cart_query" onclick="addToCart(this)" pId="{{ obj.id }}">Add to cart</button>
                            {% endif %}
                        {% else %}
                        <button type="button" class="btn btn-outline-primary btn-sm rounded-pill cart_query" onclick="" pId="{{ obj.id }}">Add to cart</button>
                        {% endif %}
                        
                    </div>
                </div>
                <!-- End Card -->
            </div>
            <!-- End Col -->
            {% endfor %}

        </div>
        <!-- End Row -->

        <div class="text-center">
            <a class="btn btn-outline-primary btn-transition rounded-pill" href="#">View all products</a>
        </div>
    </div>
    <!-- End Card Grid -->

    <!-- Subscribe -->
    {% include "frontend/widgets/subscribe.html" %}
    <!-- End Subscribe -->

    <!-- Clients -->
    {% include "frontend/widgets/clients.html" %}
    <!-- End Clients -->
</main>

{% endblock content %}

